<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω - –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .screen {
            display: none;
            flex: 1;
            flex-direction: column;
            padding: 20px;
        }
        
        .active {
            display: flex !important;
        }
        
        .header {
            background: #333;
            padding: 20px;
            text-align: center;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            border-radius: 15px;
        }
        
        .main-button {
            flex: 1;
            background: #fff;
            color: #000;
            border: none;
            border-radius: 30px;
            margin: 15px 0;
            font-size: 5em;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 20px rgba(255,255,255,0.1);
            padding: 40px;
            text-align: center;
            min-height: 300px;
        }
        
        .main-button:active {
            background: #ddd;
            transform: scale(0.98);
        }
        
        .icon {
            font-size: 2em;
            margin-bottom: 40px;
        }
        
        .secondary-button {
            background: #555;
            color: #fff;
            border: none;
            border-radius: 25px;
            padding: 40px 30px;
            font-size: 3.5em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            margin: 15px 0;
        }
        
        .secondary-button:active {
            background: #444;
            transform: scale(0.98);
        }
        
        .input-large {
            font-size: 4em;
            text-align: center;
            border: 6px solid #fff;
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            background: #000;
            color: #fff;
            font-weight: bold;
        }
        
        .button-row {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }
        
        .number-button {
            flex: 1;
            background: #333;
            color: #fff;
            border: none;
            border-radius: 20px;
            padding: 35px;
            font-size: 3.5em;
            font-weight: bold;
            cursor: pointer;
        }
        
        .number-button:active {
            background: #555;
        }
        
        .action-button {
            background: #fff;
            color: #000;
            border: none;
            border-radius: 25px;
            padding: 40px;
            font-size: 3em;
            font-weight: bold;
            cursor: pointer;
            margin: 15px 0;
        }
        
        .green-button {
            background: #00ff00;
            color: #000;
        }
        
        .red-button {
            background: #ff4444;
            color: #fff;
        }
        
        .back-button {
            background: #666;
            color: #fff;
        }
        
        .user-info {
            background: #333;
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            font-size: 2.5em;
            text-align: center;
        }
        
        .balance-display {
            font-size: 4em;
            color: #00ff00;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .time-display {
            font-size: 2em;
            color: #ccc;
            text-align: center;
            margin: 10px 0;
        }
        
        .calculator-display {
            background: #222;
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            font-size: 2.5em;
        }
        
        .bonus-result {
            font-size: 3em;
            color: #00ff00;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù -->
    <div class="screen active" id="mainScreen">
        <div class="header">–ë–û–ù–£–°–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</div>
        
        <button class="main-button" onclick="showScanScreen()">
            <div class="icon">üì∑</div>
            –°–ö–ê–ù–ò–†–û–í–ê–¢–¨ –®–¢–†–ò–•–ö–û–î
        </button>
        
        <button class="secondary-button" onclick="showManualInput()">
            ‚å®Ô∏è –†–£–ß–ù–û–ô –í–í–û–î –®–¢–†–ò–•–ö–û–î–ê
        </button>
    </div>

    <!-- –≠–ö–†–ê–ù –†–£–ß–ù–û–ì–û –í–í–û–î–ê –®–¢–†–ò–•–ö–û–î–ê -->
    <div class="screen" id="manualInputScreen">
        <div class="header">–í–í–û–î –®–¢–†–ò–•–ö–û–î–ê</div>
        
        <input type="text" class="input-large" id="barcodeInput" placeholder="123456789012" maxlength="12" readonly>
        
        <div class="button-row">
            <button class="number-button" onclick="addNumber('1')">1</button>
            <button class="number-button" onclick="addNumber('2')">2</button>
            <button class="number-button" onclick="addNumber('3')">3</button>
        </div>
        
        <div class="button-row">
            <button class="number-button" onclick="addNumber('4')">4</button>
            <button class="number-button" onclick="addNumber('5')">5</button>
            <button class="number-button" onclick="addNumber('6')">6</button>
        </div>
        
        <div class="button-row">
            <button class="number-button" onclick="addNumber('7')">7</button>
            <button class="number-button" onclick="addNumber('8')">8</button>
            <button class="number-button" onclick="addNumber('9')">9</button>
        </div>
        
        <div class="button-row">
            <button class="number-button red-button" onclick="clearInput()">–û–ß–ò–°–¢–ò–¢–¨</button>
            <button class="number-button" onclick="addNumber('0')">0</button>
            <button class="number-button red-button" onclick="deleteLast()">‚å´ –£–î–ê–õ–ò–¢–¨</button>
        </div>
        
        <button class="action-button green-button" onclick="findUserByBarcode()">üîç –ù–ê–ô–¢–ò –ö–õ–ò–ï–ù–¢–ê</button>
        <button class="action-button back-button" onclick="showMainScreen()">‚Ü© –ù–ê–ó–ê–î</button>
    </div>

    <!-- –≠–ö–†–ê–ù –ò–ù–§–û–†–ú–ê–¶–ò–ò –û –ö–õ–ò–ï–ù–¢–ï –ò –ù–ê–ß–ò–°–õ–ï–ù–ò–Ø -->
    <div class="screen" id="userInfoScreen">
        <div class="header">–ù–ê–ß–ò–°–õ–ï–ù–ò–ï –ë–û–ù–£–°–û–í</div>
        
        <div class="time-display" id="currentTime">--:--:--</div>
        
        <div class="user-info">
            <div>–ö–ª–∏–µ–Ω—Ç: <span id="userName">-</span></div>
            <div class="balance-display" id="userBalance">0 –±–æ–Ω—É—Å–æ–≤</div>
            <div>–®—Ç—Ä–∏—Ö–∫–æ–¥: <span id="userBarcode">-</span></div>
        </div>

        <!-- –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –°–£–ú–ú–´ –ü–û–ö–£–ü–ö–ò -->
        <div class="calculator-display">
            <div>–°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ (—Ä—É–±):</div>
            <input type="text" class="input-large" id="purchaseAmount" placeholder="0" readonly>
            
            <div class="button-row">
                <button class="number-button" onclick="addPurchaseNumber('1')">1</button>
                <button class="number-button" onclick="addPurchaseNumber('2')">2</button>
                <button class="number-button" onclick="addPurchaseNumber('3')">3</button>
            </div>
            
            <div class="button-row">
                <button class="number-button" onclick="addPurchaseNumber('4')">4</button>
                <button class="number-button" onclick="addPurchaseNumber('5')">5</button>
                <button class="number-button" onclick="addPurchaseNumber('6')">6</button>
            </div>
            
            <div class="button-row">
                <button class="number-button" onclick="addPurchaseNumber('7')">7</button>
                <button class="number-button" onclick="addPurchaseNumber('8')">8</button>
                <button class="number-button" onclick="addPurchaseNumber('9')">9</button>
            </div>
            
            <div class="button-row">
                <button class="number-button red-button" onclick="clearPurchaseInput()">–û–ß–ò–°–¢–ò–¢–¨</button>
                <button class="number-button" onclick="addPurchaseNumber('0')">0</button>
                <button class="number-button" onclick="addPurchaseNumber('.')">.</button>
            </div>
            
            <div class="bonus-result" id="bonusCalculation">
                0 –±–æ–Ω—É—Å–æ–≤
            </div>
        </div>

        <!-- –ü–†–Ø–ú–û–ï –ù–ê–ß–ò–°–õ–ï–ù–ò–ï –ë–û–ù–£–°–û–í -->
        <div class="calculator-display">
            <div>–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –±–æ–Ω—É—Å—ã –Ω–∞–ø—Ä—è–º—É—é:</div>
            <input type="text" class="input-large" id="directBonusInput" placeholder="0" readonly>
            
            <div class="button-row">
                <button class="number-button" onclick="addDirectBonus('10')">+10</button>
                <button class="number-button" onclick="addDirectBonus('50')">+50</button>
                <button class="number-button" onclick="addDirectBonus('100')">+100</button>
            </div>
            
            <div class="button-row">
                <button class="number-button red-button" onclick="clearDirectBonus()">–û–ß–ò–°–¢–ò–¢–¨</button>
                <button class="number-button" onclick="addDirectBonus('5')">+5</button>
                <button class="number-button" onclick="addDirectBonus('25')">+25</button>
            </div>
        </div>

        <button class="action-button green-button" onclick="addBonusesToUser()">‚úÖ –ù–ê–ß–ò–°–õ–ò–¢–¨ –ë–û–ù–£–°–´</button>
        <button class="action-button back-button" onclick="showMainScreen()">üîÑ –ù–û–í–´–ô –ö–õ–ò–ï–ù–¢</button>
    </div>

    <script>
        let currentUser = null;
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }
        
        function showMainScreen() {
            currentUser = null;
            showScreen('mainScreen');
        }
        
        function showScanScreen() {
            // –≠–º—É–ª—è—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–∫–∞–Ω–µ—Ä–æ–º
            const demoBarcode = "123456789012";
            document.getElementById('barcodeInput').value = demoBarcode;
            findUserByBarcode();
        }
        
        function showManualInput() {
            showScreen('manualInputScreen');
            document.getElementById('barcodeInput').value = '';
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–≤–æ–¥–æ–º —à—Ç—Ä–∏—Ö–∫–æ–¥–∞
        function addNumber(number) {
            const input = document.getElementById('barcodeInput');
            if (input.value.length < 12) {
                input.value += number;
            }
        }
        
        function clearInput() {
            document.getElementById('barcodeInput').value = '';
        }
        
        function deleteLast() {
            const input = document.getElementById('barcodeInput');
            input.value = input.value.slice(0, -1);
        }
        
        // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É
        async function findUserByBarcode() {
            const barcode = document.getElementById('barcodeInput').value;
            
            if (barcode.length !== 12) {
                alert('–®—Ç—Ä–∏—Ö–∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 12 —Ü–∏—Ñ—Ä!');
                return;
            }
            
            // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            const demoUsers = {
                "123456789012": { username: "ivan_petrov", balance: 150 },
                "987654321098": { username: "maria_ivanova", balance: 75 },
                "111222333444": { username: "alex_smirnov", balance: 200 }
            };
            
            if (demoUsers[barcode]) {
                currentUser = {
                    barcode: barcode,
                    username: demoUsers[barcode].username,
                    balance: demoUsers[barcode].balance
                };
                
                showUserInfoScreen();
            } else {
                alert('–ö–ª–∏–µ–Ω—Ç —Å —Ç–∞–∫–∏–º —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            }
        }
        
        // –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function showUserInfoScreen() {
            document.getElementById('userName').textContent = currentUser.username;
            document.getElementById('userBalance').textContent = currentUser.balance + ' –±–æ–Ω—É—Å–æ–≤';
            document.getElementById('userBarcode').textContent = currentUser.barcode;
            
            clearPurchaseInput();
            clearDirectBonus();
            updateBonusCalculation();
            
            showScreen('userInfoScreen');
            updateTime();
        }
        
        // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—É–º–º—ã –ø–æ–∫—É–ø–∫–∏
        function addPurchaseNumber(number) {
            const input = document.getElementById('purchaseAmount');
            if (number === '.' && input.value.includes('.')) return;
            if (input.value === '0') input.value = '';
            input.value += number;
            updateBonusCalculation();
        }
        
        function clearPurchaseInput() {
            document.getElementById('purchaseAmount').value = '0';
            updateBonusCalculation();
        }
        
        function updateBonusCalculation() {
            const amount = parseFloat(document.getElementById('purchaseAmount').value) || 0;
            const bonuses = Math.floor(amount / 0.5); // 1 –±–æ–Ω—É—Å = 0.5 —Ä—É–±
            document.getElementById('bonusCalculation').textContent = bonuses + ' –±–æ–Ω—É—Å–æ–≤';
        }
        
        // –ü—Ä—è–º–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
        function addDirectBonus(amount) {
            const input = document.getElementById('directBonusInput');
            const current = parseInt(input.value) || 0;
            input.value = current + parseInt(amount);
        }
        
        function clearDirectBonus() {
            document.getElementById('directBonusInput').value = '0';
        }
        
        // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
        async function addBonusesToUser() {
            const purchaseAmount = parseFloat(document.getElementById('purchaseAmount').value) || 0;
            const directBonus = parseInt(document.getElementById('directBonusInput').value) || 0;
            
            let bonusesToAdd = directBonus;
            
            if (purchaseAmount > 0) {
                bonusesToAdd += Math.floor(purchaseAmount / 0.5);
            }
            
            if (bonusesToAdd <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–Ω—É—Å–æ–≤ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è!');
                return;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å (–≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ API)
            currentUser.balance += bonusesToAdd;
            
            alert(`–£—Å–ø–µ—à–Ω–æ –Ω–∞—á–∏—Å–ª–µ–Ω–æ ${bonusesToAdd} –±–æ–Ω—É—Å–æ–≤!\n–ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${currentUser.balance} –±–æ–Ω—É—Å–æ–≤`);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            document.getElementById('userBalance').textContent = currentUser.balance + ' –±–æ–Ω—É—Å–æ–≤';
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            clearPurchaseInput();
            clearDirectBonus();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU');
            document.getElementById('currentTime').textContent = timeString;
        }
        
        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', function(event) {
            if (event.key >= '0' && event.key <= '9') {
                if (document.getElementById('manualInputScreen').classList.contains('active')) {
                    addNumber(event.key);
                }
            } else if (event.key === 'Enter') {
                if (document.getElementById('manualInputScreen').classList.contains('active')) {
                    findUserByBarcode();
                }
            } else if (event.key === 'Escape') {
                showMainScreen();
            }
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        setInterval(() => {
            if (document.getElementById('userInfoScreen').classList.contains('active')) {
                updateTime();
            }
        }, 1000);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        showMainScreen();
    </script>
</body>
</html>
